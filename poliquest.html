<!DOCTYPE html>
<html lang="pt-BR" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questionário de Ideologia Política</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Descubra a sua ideologia política com este questionário interativo. Responda a uma série de perguntas para ver a sua posição em vários espectros políticos, incluindo economia, sociedade e relações exteriores.">
    <meta name="keywords" content="teste político, questionário de ideologia, bússola política, espectro político, liberalismo, conservadorismo, socialismo, capitalismo, política, ideologia">
    <meta name="author" content="Drxty">
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://drxty.github.io/PoliQuest/">
    <meta property="og:title" content="Questionário de Ideologia Política">
    <meta property="og:description" content="Descubra a sua ideologia política com este questionário interativo.">
    <meta property="og:image" content="https://placehold.co/1200x630/3b82f6/ffffff?text=PoliQuest">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://drxty.github.io/PoliQuest/">
    <meta property="twitter:title" content="Questionário de Ideologia Política">
    <meta property="twitter:description" content="Descubra a sua ideologia política com este questionário interativo.">
    <meta property="twitter:image" content="https://placehold.co/1200x630/3b82f6/ffffff?text=PoliQuest">

    <style>
        /* Definição da nova fonte Luciole */
        @font-face {
            font-family: 'Luciole';
            src: url('https://drxty.github.io/fonts/Luciole-Regular.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'Luciole';
            src: url('https://drxty.github.io/fonts/Luciole-Bold.woff2') format('woff2');
            font-weight: bold;
            font-style: normal;
        }
        @font-face {
            font-family: 'Luciole';
            src: url('https://drxty.github.io/fonts/Luciole-Italic.woff2') format('woff2');
            font-weight: normal; 
            font-style: italic;
        }
        @font-face {
            font-family: 'Luciole';
            src: url('https://drxty.github.io/fonts/Luciole-BoldItalic.woff2') format('woff2');
            font-weight: bold; 
            font-style: italic;
        }

        /* Estilos Gerais e Variáveis de Cor */
        :root {
            font-size: 16px; /* Tamanho base da fonte */

            /* Tema Claro */
            --bg-color: #f3f4f6;
            --text-color: #111827;
            --card-bg-color: #ffffff;
            --card-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --border-color: #d1d5db;
            --accent-color: #3b82f6;
        }

        html.dark {
            /* Tema Escuro */
            --bg-color: #111827;
            --text-color: #f9fafb;
            --card-bg-color: #1f2937;
            --card-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
            --border-color: #4b5563;
            --accent-color: #60a5fa;
        }

        body {
            /* Fonte e renderização atualizadas */
            font-family: 'Luciole', sans-serif;
            font-feature-settings: "zero", "liga";
            text-rendering: optimizeLegibility;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
            margin: 0;
            padding: 1rem;
        }

        /* Padrões de Fundo */
        .pattern-capitalism { background-color: #60a5fa; background-image: radial-gradient(circle at 1px 1px, #bfdbfe 1px, transparent 0); background-size: 20px 20px; }
        .pattern-socialism { background-color: #f87171; background-image: repeating-linear-gradient(45deg, #ef4444 0, #ef4444 1px, transparent 0, transparent 50%); background-size: 8px 8px; }
        .pattern-liberalism { background-color: #fde047; background-image: radial-gradient(#fbbf24 15%, transparent 15%); background-size: 20px 20px; }
        .pattern-conservatism { background-color: #38bdf8; background-image: repeating-linear-gradient(-45deg, #0ea5e9, #0ea5e9 5px, transparent 5px, transparent 10px); }
        .pattern-nationalisation { background-color: #7dd3fc; background-image: linear-gradient(335deg, #0ea5e9 23px, transparent 23px), linear-gradient(155deg, #0ea5e9 23px, transparent 23px), linear-gradient(335deg, #0ea5e9 23px, transparent 23px), linear-gradient(155deg, #0ea5e9 23px, transparent 23px); background-size: 58px 58px; background-position: 0px 2px, 4px 35px, 29px 31px, 34px 6px; }
        .pattern-globalisation { background-color: #4ade80; background-image: linear-gradient(135deg, #22c55e 25%, transparent 25%), linear-gradient(225deg, #22c55e 25%, transparent 25%), linear-gradient(45deg, #22c55e 25%, transparent 25%), linear-gradient(315deg, #22c55e 25%, #4ade80 25%); background-size: 30px 30px; }
        .pattern-rehabilitation { background-color: #c4b5fd; background-image: repeating-radial-gradient(circle at 0 0, transparent 0, #a78bfa 10px), repeating-linear-gradient(#c4b5fd, #a78bfa); }
        .pattern-punishment { background-color: #fca5a5; background-image: linear-gradient(45deg, #b91c1c 25%, transparent 25%, transparent 75%, #b91c1c 75%, #b91c1c), linear-gradient(-45deg, #b91c1c 25%, transparent 25%, transparent 75%, #b91c1c 75%, #b91c1c); background-size: 20px 20px; }
        .pattern-libertarianism { background-color: #fef08a; background-image: url("data:image/svg+xml,%3Csvg width='10' height='10' viewBox='0 0 10 10' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M-1 1l2-2m0 10l-2 2m10-12l2-2m0 10l2 2' stroke='%23facc15' stroke-width='1' stroke-linecap='round'/%3E%3C/svg%3E"); }
        .pattern-neoliberalism { background-color: #dbeafe; background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h20L0 20z' fill='%2393c5fd' fill-opacity='0.5'/%3E%3C/svg%3E"); }
        .pattern-progressivism { background-color: #dcfce7; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cg fill='%2386efac' fill-opacity='0.4'%3E%3Cpolygon fill-rule='evenodd' points='8 4 12 6 8 8 6 12 4 8 0 6 4 4 6 0 8 4'/%3E%3C/g%3E%3C/svg%3E"); }
        .pattern-dirigisme { background-color: #ffedd5; background-image: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h16v2h-16zM0 8h16v2h-16zM0 14h16v2h-16z' fill='%23fdba74' fill-opacity='0.6' fill-rule='evenodd'/%3E%3C/svg%3E"); }
        .pattern-communism { background-color: #fee2e2; background-image: url("data:image/svg+xml,%3Csvg width='6' height='6' viewBox='0 0 6 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23dc2626' fill-opacity='0.4' fill-rule='evenodd'%3E%3Cpath d='M5 0h1L0 6V5zM6 5v1H5z'/%3E%3C/g%3E%3C/svg%3E"); }
        .pattern-anarchic { background-color: #ffedd5; background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='10' cy='10' r='5' fill='%23fb923c'/%3E%3C/svg%3E"); background-repeat: repeat; background-size: 20px 20px;}
        .pattern-liberal { background-color: #fef9c3; background-image: url("data:image/svg+xml,%3Csvg width='12' height='12' viewBox='0 0 12 12' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M2 2h8v8h-8z' fill='%23fde047' fill-opacity='0.5'/%3E%3C/svg%3E");}
        .pattern-moderate { background-color: #cffafe; background-image: url("data:image/svg+xml,%3Csvg width='4' height='4' viewBox='0 0 4 4' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M-1 3h1v1h-1zM1 3h1v1h-1zM3 3h1v1h-1zM-1 1h1v1h-1zM1 1h1v1h-1zM3 1h1v1h-1z' fill='%2367e8f9' fill-opacity='0.6'/%3E%3C/svg%3E");}
        .pattern-conservative { background-color: #dbeafe; background-image: url("data:image/svg+xml,%3Csvg width='8' height='8' viewBox='0 0 8 8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h8v2h-8zM0 4h8v2h-8z' fill='%2393c5fd' fill-opacity='0.5'/%3E%3C/svg%3E");}
        .pattern-authoritarian { background-color: #e9d5ff; background-image: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 0L0 8l8 8 8-8z' fill='%23c084fc' fill-opacity='0.4'/%3E%3C/svg%3E");}
        .pattern-autarchy { background-color: #e5e7eb; background-image: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%239ca3af' fill-opacity='0.3' fill-rule='evenodd'%3E%3Cpath d='M0 40L40 0H20L0 20zM40 40V20L20 40z'/%3E%3C/g%3E%3C/svg%3E");}
        .pattern-isolationism { background-color: #dbeafe; background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='0' y='0' width='20' height='20' fill='none' stroke='%2393c5fd' stroke-width='2'/%3E%3C/svg%3E"); background-size: 20px 20px;}
        .pattern-nationalism { background-color: #f3e8ff; background-image: url("data:image/svg+xml,%3Csvg width='20' height='12' viewBox='0 0 20 12' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 12L0 2h20L10 12z' fill='%23d8b4fe' fill-opacity='0.4'/%3E%3C/svg%3E");}
        .pattern-internationalism { background-color: #ffedd5; background-image: url("data:image/svg+xml,%3Csvg width='28' height='28' viewBox='0 0 28 28' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14 0l14 14-14 14-14-14z' fill='%23fb923c' fill-opacity='0.3'/%3E%3C/svg%3E");}
        .pattern-world-government { background-color: #dcfce7; background-image: url("data:image/svg+xml,%3Csvg width='44' height='12' viewBox='0 0 44 12' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20 12v-2L0 0v2zM44 12v-2L24 0v2z' fill='%2386efac' fill-opacity='0.4'/%3E%3C/svg%3E");}
        .pattern-restorative { background-color: #e0e7ff; background-image: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 12c0-3.31 2.69-6 6-6s6 2.69 6 6-2.69 6-6 6-6-2.69-6-6zm0-10c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z' fill='%23a5b4fc' fill-opacity='0.5'/%3E%3C/svg%3E");}
        .pattern-retributive { background-color: #fecaca; background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 10L10 0 L20 10 L10 20 Z' fill='none' stroke='%23f87171' stroke-width='2'/%3E%3C/svg%3E"); background-size: 20px 20px;}
        
        /* Controles de Acessibilidade */
        .accessibility-controls {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 50;
            display: flex;
            gap: 0.5rem;
        }
        .accessibility-controls button {
            border-radius: 9999px;
            padding: 0.5rem;
            background-color: var(--card-bg-color);
            border: 1px solid var(--border-color);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .accessibility-controls svg {
            width: 1.5rem;
            height: 1.5rem;
        }

        /* Layout Principal */
        .quiz-container, .graphs-container {
            max-width: 1152px;
            margin: 2rem auto;
        }
        .quiz-card {
            background-color: var(--card-bg-color);
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: var(--card-shadow);
            text-align: center;
        }
        .hidden { display: none; }

        /* Botões */
        button {
            font-family: 'Luciole', sans-serif;
            font-weight: normal;
            padding: 11px 10px 8px 10px;
            border-radius: 0.9em;
            cursor: pointer;
            background-color: var(--bg-color);
            color: var(--text-color);
            border: 2px solid var(--text-color);
            transition: box-shadow 0.2s ease, border-radius 0.1s ease-in-out, transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        button:hover {
            box-shadow: 0 0px 0px, inset 0 0 0 3px var(--text-color);
        }
        button:active {
            border-radius: 50%;
            transform: scale(0.90);
            box-shadow: inset 0 0 0 0px var(--text-color);
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* Seção do Questionário */
        #question-text {
            font-size: 1.5rem;
            font-weight: normal;
            margin-bottom: 1.5rem;
            min-height: 6rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #question-example {
            font-size: 1rem;
            font-style: italic;
            color: var(--text-color);
            opacity: 0.8;
            margin-top: -1rem;
            margin-bottom: 1.5rem;
            max-width: 80%;
            margin-left: auto;
            margin-right: auto;
        }
        .slider-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }
        #answer-slider {
            width: 100%;
            max-width: 24rem;
        }
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }

        /* Controles de Navegação de Questões */
        .question-nav-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            gap: 1rem;
        }
        #question-select {
            padding: 0.5rem;
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
            background-color: var(--bg-color);
            color: var(--text-color);
            max-width: 250px;
        }

        /* Gráficos */
        .graphs-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }
        @media (min-width: 768px) {
            .graphs-grid { grid-template-columns: repeat(2, 1fr); }
        }
        .graph-card {
            background-color: var(--card-bg-color);
            padding: 1rem;
            border-radius: 1rem;
            box-shadow: var(--card-shadow);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .graph-title { 
            font-size: 1.25rem; 
            font-weight: normal;
            margin-bottom: 1rem; 
            text-align: center; 
        }
        .graph-content {
            width: 100%;
            aspect-ratio: 1.77;
            display: flex;
            gap: 0.5rem;
            position: relative;
        }
        .graph-column {
            width: 50%;
            display: flex;
            flex-direction: column;
            border-radius: 0.5rem;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }
        .graph-column > div {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.25rem;
            text-align: center;
        }
        .graph-column.sub-categories {
            font-size: 0.75rem;
            font-weight: normal;
        }
        .scale-column {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            font-size: 0.75rem;
            color: var(--text-color);
            opacity: 0.8;
            padding: 0.25rem 0;
        }
        .text-overlay, .sub-categories .text-label {
            background-color: white;
            padding: 0.25rem 0.6rem;
            border-radius: 8px;
            color: black;
            text-shadow: none;
            font-weight: normal;
        }
        .sub-categories .text-label {
            font-size: 0.75rem;
        }

        /* Estilos do Ponto Flutuante */
        .floating-point {
            position: absolute;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.85);
            border: 3px solid black;
            border-radius: 50%;
            transition: top 0.3s ease-out;
            z-index: 10;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: normal;
            color: black;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            z-index: 100;
        }
        .modal-content {
            background-color: var(--card-bg-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            max-width: 512px;
            width: 100%;
        }
        .modal-content h3 { font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem; }
        .modal-content p { font-size: 1.125rem; }
        
        /* Seção de Relatório */
        #report-container {
            margin-top: 1.5rem;
            text-align: left;
            border-top: 1px solid var(--border-color);
            padding-top: 1.5rem;
        }
        #report-output {
            width: 100%;
            height: 150px;
            background-color: var(--bg-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 0.5rem;
            margin-bottom: 1rem;
            resize: vertical;
        }
        .report-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        /* Estilos do Rodapé */
        footer {
            text-align: center;
            padding: 2rem 1rem;
            margin-top: 2rem;
            font-size: 0.875rem;
            color: var(--text-color);
            opacity: 0.8;
            border-top: 1px solid var(--border-color);
        }
        footer a {
            color: inherit;
            text-decoration: underline;
        }
        footer a:hover {
            text-decoration: underline;
        }
        footer p {
            margin: 0.5rem 0;
        }
    </style>
</head>
<body>

    <!-- Controles de Acessibilidade e Tema -->
    <div class="accessibility-controls">
        <button id="theme-toggle" title="Alternar tema">
            <svg id="theme-icon-light" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" /></svg>
            <svg id="theme-icon-dark" class="hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" /></svg>
        </button>
        <button id="decrease-font" title="Diminuir fonte" style="font-size: 1.25rem;">-</button>
        <button id="increase-font" title="Aumentar fonte" style="font-size: 1.25rem;">+</button>
    </div>

    <!-- Seção do Questionário -->
    <div class="quiz-container">
        <div class="quiz-card">
            <div id="intro-section">
                <h1 style="font-size: 2rem; margin-bottom: 0.5rem; font-weight: normal;">Questionário de Ideologia Política</h1>
                <p style="font-size: 1.125rem; margin-bottom: 1rem;">Responda às perguntas para encontrar sua posição nos espectros políticos.</p>
                <p style="margin-bottom: 1rem;">Considere que governança é a organização, gerência ou administração de uma coletividade humana.</p>
                
                <div style="margin-bottom: 1.5rem;">
                    <label for="continent-select" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Primeiro, em qual região você vive?</label>
                    <select id="continent-select" style="padding: 0.5rem; border-radius: 0.5rem; border: 1px solid var(--border-color); background-color: var(--bg-color); color: var(--text-color);">
                        <optgroup label="África">
                            <option value="africa-norte">Norte da África</option>
                            <option value="africa-ocidental">África Ocidental</option>
                            <option value="africa-central">África Central</option>
                            <option value="africa-oriental">África Oriental</option>
                            <option value="africa-austral">África Austral</option>
                        </optgroup>
                        <optgroup label="América">
                            <option value="america-norte">América do Norte</option>
                            <option value="america-central">América Central</option>
                            <option value="america-sul" selected>América do Sul</option>
                            <option value="caribe">Caribe</option>
                        </optgroup>
                        <optgroup label="Ásia">
                            <option value="asia-central">Ásia Central</option>
                            <option value="asia-oriental">Ásia Oriental</option>
                            <option value="sudeste-asiatico">Sudeste Asiático</option>
                            <option value="asia-meridional">Ásia Meridional (Sul)</option>
                            <option value="oriente-medio">Oriente Médio (Oeste Asiático)</option>
                        </optgroup>
                        <optgroup label="Europa">
                            <option value="europa-ocidental">Europa Ocidental</option>
                            <option value="europa-oriental">Europa Oriental</option>
                            <option value="europa-norte">Norte da Europa (Nórdicos)</option>
                            <option value="europa-sul">Sul da Europa</option>
                        </optgroup>
                        <optgroup label="Oceania">
                            <option value="australasia">Australásia (Austrália/Nova Zelândia)</option>
                            <option value="melanesia">Melanésia</option>
                            <option value="micronesia">Micronésia</option>
                            <option value="polinesia">Polinésia</option>
                        </optgroup>
                    </select>
                </div>

                <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5rem; margin-bottom: 1.5rem;">
                    <button id="info-estado-btn">O que é o Estado?</button>
                    <button id="info-cooperativa-btn">O que é uma Cooperativa?</button>
                    <button id="info-empresa-btn">O que é uma Empresa?</button>
                </div>
                <button id="start-quiz-btn">Iniciar Questionário</button>
            </div>

            <div id="question-container" class="hidden">
                <div class="question-nav-controls">
                    <p id="question-counter"></p>
                    <select id="question-select"></select>
                </div>
                <p id="question-text"></p>
                <p id="question-example" class="hidden"></p>
                <div class="slider-container">
                    <span style="font-size: 1.125rem; color: #dc2626; font-weight: normal;">Discordo</span>
                    <input type="range" id="answer-slider" min="-10" max="10" value="0">
                    <span style="font-size: 1.125rem; color: #16a34a; font-weight: normal;">Concordo</span>
                </div>
                <p id="slider-value" style="margin-top: 0.5rem; font-size: 1.5rem; font-weight: bold;">0</p>
                <div class="navigation-buttons">
                    <button id="prev-question-btn">Anterior</button>
                    <button id="home-btn">Voltar ao Início</button>
                    <button id="next-question-btn">Próxima</button>
                </div>
            </div>

             <div id="results-section" class="hidden">
                <h2 style="font-size: 1.875rem; font-weight: bold; margin-bottom: 1rem;">Questionário Concluído!</h2>
                <p style="font-size: 1.125rem;">Seus resultados estão refletidos nos gráficos abaixo.</p>
                 <div style="margin-top: 1rem; font-size: 0.875rem; text-align: center; max-width: 60ch; margin-left: auto; margin-right: auto;">
                    <p><strong>Aviso:</strong> Este é um teste de autoavaliação e não um diagnóstico político definitivo. Os resultados são simplificações e servem como ponto de partida para reflexão.</p>
                </div>
                <div style="margin-top: 2rem; padding: 1rem; border: 1px solid var(--border-color); border-radius: 0.5rem; background-color: var(--bg-color);">
                    <h3 style="font-size: 1.25rem; font-weight: bold; margin-bottom: 0.5rem;">Ajude a melhorar este teste!</h3>
                    <p style="font-size: 0.875rem; max-width: 60ch; margin: 0 auto 1rem;">Para aprimorar a precisão e relevância deste questionário, estamos coletando dados anônimos das respostas. Clique no botão abaixo para gerar seu relatório. Depois, você pode copiá-lo e enviá-lo manualmente para nós.</p>
                    <button id="generate-report-btn">Gerar Relatório</button>
                    
                    <div id="report-container" class="hidden">
                         <p style="margin-bottom: 0.5rem;">Envie seu relatório para: <span style="user-select: all; background: var(--card-bg-color); padding: 2px 4px; border-radius: 4px; font-weight: normal;">dta.gem018@passinbox.com</span></p>
                         <textarea id="report-output" readonly></textarea>
                         <div class="report-actions">
                             <button id="copy-report-btn">Copiar Relatório</button>
                             <button id="download-report-btn">Baixar Relatório (.txt)</button>
                         </div>
                         <p id="copy-feedback" style="margin-top: 0.5rem; font-size: 0.875rem; color: #16a34a;"></p>
                    </div>
                </div>
                <button id="restart-quiz-btn" style="margin-top: 1.5rem;">Reiniciar Questionário</button>
            </div>
        </div>
    </div>

    <!-- Container dos Gráficos -->
    <div class="graphs-container">
        <div class="graphs-grid">
            <!-- Gráfico 1: Economia -->
            <div class="graph-card">
                <h2 class="graph-title">Envolvimento na Economia</h2>
                <div class="graph-content">
                    <div id="economy-point" class="floating-point">
                        <span id="economy-point-value">50%</span>
                    </div>
                    <div class="graph-column main-categories">
                        <div class="pattern-capitalism"><span class="text-overlay">Capitalismo</span></div>
                        <div class="pattern-socialism"><span class="text-overlay">Socialismo</span></div>
                    </div>
                    <div class="scale-column"><span>0%</span><span>50%</span><span>100%</span></div>
                    <div class="graph-column sub-categories">
                        <div class="pattern-libertarianism"><span class="text-label">Libertarianismo</span></div>
                        <div class="pattern-neoliberalism"><span class="text-label">Neoliberalismo</span></div>
                        <div class="pattern-progressivism"><span class="text-label">Progressivismo</span></div>
                        <div class="pattern-dirigisme"><span class="text-label">Dirigismo</span></div>
                        <div class="pattern-communism"><span class="text-label">Comunismo</span></div>
                    </div>
                </div>
            </div>
            <!-- Gráfico 2: Sociedade -->
            <div class="graph-card">
                <h2 class="graph-title">Envolvimento na Sociedade</h2>
                <div class="graph-content">
                    <div id="society-point" class="floating-point">
                        <span id="society-point-value">50%</span>
                    </div>
                    <div class="graph-column main-categories">
                        <div class="pattern-liberalism"><span class="text-overlay">Liberalismo</span></div>
                        <div class="pattern-conservatism"><span class="text-overlay">Conservadorismo</span></div>
                    </div>
                    <div class="scale-column"><span>0%</span><span>50%</span><span>100%</span></div>
                    <div class="graph-column sub-categories">
                        <div class="pattern-anarchic"><span class="text-label">Anárquico</span></div>
                        <div class="pattern-liberal"><span class="text-label">Liberal</span></div>
                        <div class="pattern-moderate"><span class="text-label">Moderado</span></div>
                        <div class="pattern-conservative"><span class="text-label">Conservador</span></div>
                        <div class="pattern-authoritarian"><span class="text-label">Autoritário</span></div>
                    </div>
                </div>
            </div>
            <!-- Gráfico 3: Externo -->
            <div class="graph-card">
                <h2 class="graph-title">Envolvimento Externo</h2>
                <div class="graph-content">
                    <div id="foreign-point" class="floating-point">
                        <span id="foreign-point-value">50%</span>
                    </div>
                    <div class="graph-column main-categories">
                        <div class="pattern-nationalisation"><span class="text-overlay">Nacionalização</span></div>
                        <div class="pattern-globalisation"><span class="text-overlay">Globalização</span></div>
                    </div>
                    <div class="scale-column"><span>0%</span><span>50%</span><span>100%</span></div>
                    <div class="graph-column sub-categories">
                        <div class="pattern-autarchy"><span class="text-label">Autarquia</span></div>
                        <div class="pattern-isolationism"><span class="text-label">Isolacionismo</span></div>
                        <div class="pattern-nationalism"><span class="text-label">Nacionalismo</span></div>
                        <div class="pattern-internationalism"><span class="text-label">Internacionalismo</span></div>
                        <div class="pattern-world-government"><span class="text-label">Governo Mundial</span></div>
                    </div>
                </div>
            </div>
            <!-- Gráfico 4: Regras Sociais -->
            <div class="graph-card">
                <h2 class="graph-title">Envolvimento em Regras Sociais</h2>
                <div class="graph-content">
                    <div id="rules-point" class="floating-point">
                        <span id="rules-point-value">50%</span>
                    </div>
                    <div class="graph-column main-categories">
                        <div class="pattern-rehabilitation"><span class="text-overlay">Reabilitação</span></div>
                        <div class="pattern-punishment"><span class="text-overlay">Punição</span></div>
                    </div>
                    <div class="scale-column"><span>0%</span><span>50%</span><span>100%</span></div>
                    <div class="graph-column sub-categories" style="gap: 0;">
                        <div style="height: 50%;" class="pattern-restorative"><span class="text-label">Justiça Restaurativa</span></div>
                        <div style="height: 50%;" class="pattern-retributive"><span class="text-label">Justiça Retributiva</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal para informações -->
    <div id="info-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="info-title"></h3>
            <p id="info-text"></p>
            <button id="close-modal-btn">Fechar</button>
        </div>
    </div>

    <!-- Rodapé -->
    <footer>
        <p>
            <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
                <img alt="Licença Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" />
            </a>
        </p>
        <p>
            Este trabalho está licenciado sob uma <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Licença Creative Commons Atribuição 4.0 Internacional</a>.
        </p>
        <p>
            Conteúdo original por <a href="https://github.com/Drxty" target="_blank" rel="noopener noreferrer">Drxty</a>. Versão aprimorada por Gemini.
        </p>
    </footer>

    <script>
        // Definições e Perguntas
        const definitions = {
            cooperativa: { title: 'O que é uma Cooperativa?', text: 'Uma cooperativa é uma associação autônoma de pessoas que se unem voluntariamente para atender necessidades e aspirações econômicas, sociais e culturais comuns, por meio de um empreendimento de propriedade coletiva e gestão democrática. Nessas organizações, os associados podem optar por eleger um líder ou um conselho para administrar e representá-los, ou exercer seu poder de decisão votando diretamente em questões específicas que afetem a cooperativa.' },
            estado: { title: 'O que é o Estado?', text: 'O Estado é a entidade política e jurídica que exerce autoridade soberana sobre um território e sua população, estruturando-se em instituições responsáveis por criar, aplicar e fiscalizar leis, administrar serviços públicos e representar a sociedade no plano interno e externo. Pode ser organizado de diferentes formas, incluindo regimes democráticos — nos quais o poder deriva do voto e da participação popular e pode haver divisão de poderes entre Executivo, Legislativo e Judiciário — ou regimes autoritários, com concentração de poder em um líder ou grupo restrito, havendo ainda modelos híbridos e variações entre esses extremos.' },
            empresa: { title: 'O que é uma Empresa?', text: 'A empresa é uma organização, pública ou privada, formada para produzir bens ou prestar serviços de forma contínua. Na maioria dos casos, é estabelecida com o objetivo principal de obter lucro, ou seja, gerar receita superior aos custos e despesas, distribuindo ou reinvestindo esse excedente conforme o interesse dos proprietários ou acionistas. Para isso, combina recursos humanos, materiais, tecnológicos e financeiros, atuando sob regras jurídicas e regulatórias específicas de seu setor e localidade. Pode variar em porte e estrutura, desde microempreendimentos até grandes corporações, e adotar diferentes modelos de gestão e organização interna.' }
        };

        // Mapeamento de Eixos: +1 move para baixo, -1 move para cima
        // Economy: Capitalismo(-)/Socialismo(+) | Society: Liberalismo(-)/Conservadorismo(+)
        // Foreign: Nacionalização(-)/Globalização(+) | Rules: Reabilitação(-)/Punição(+)
        const questions = [
            { question: "Tu confias mais na governança do estado?", example: "Exemplo: Você acredita que o Estado é o mais capacitado para gerir grandes setores como saúde, educação e segurança?", effects: { economy: 1.0, society: 0.5 } },
            { question: "Tu confias mais na governança das empresas e dos empreendedores?", example: "Exemplo: Você acredita que a iniciativa privada, através da competição e do lucro, é mais eficiente para oferecer produtos e serviços à sociedade?", effects: { economy: -1.5 } },
            { question: "Tu confias mais na governança das cooperativas ou das comunidades?", example: "Exemplo: Você acredita que grupos locais e associações de trabalhadores são os mais indicados para gerir seus próprios recursos e necessidades?", effects: { economy: 1.0, society: -0.5 } },
            { question: "É possível manter toda a organização da sociedade por meio de governança comunitária sem uma governança central?", example: "Exemplo: Você acredita que a sociedade pode se auto-organizar em pequenos grupos sem a necessidade de um governo nacional ou leis centralizadas?", effects: { society: -2.5 } },
            { question: "Se organizar em comunidades e escolher um líder para governar a todos é razoável?", effects: { society: 1.5 } },
            { question: "Tu confias mais na governança por meio das igrejas ou das organizações religiosas?", effects: { society: 2.0 } },
            { question: "Tu confias mais na governança da sociedade por meio de um sistema político e uma constituição (como em uma democracia)?", effects: { society: -1.5 } },
            { question: "Tu confias mais na governança feita por intermédio de um só indivíduo?", example: "Exemplo: Você acredita que um líder forte e centralizador (como um monarca ou ditador) é mais eficaz para governar do que um sistema democrático?", effects: { society: 2.5 } },
            { question: "Quão consciente a população deve estar da realidade ou da verdade para que ela possa votar bem em um sistema democrático?", effects: { society: 1.0 } },
            { question: "Quão consciente a população deve estar dos sistemas técnicos da sociedade (economia, gestão) para que ela possa votar bem?", effects: { society: 1.0 } },
            { question: "Quão consciente a população deve estar da ética ou moral para que ela possa votar bem em um sistema democrático?", effects: { society: 1.0 } },
            { question: "Quão religiosa a população deve ser para que possam votar bem um sistema democrático?", effects: { society: 1.5 } },
            { question: "Uma nação totalmente governada por cooperativas e comunidades é razoável?", effects: { economy: 1.5, society: -1.0 } },
            { question: "Quão relevante é o trabalhador ter o direito de governar alguma parte do seu trabalho e dos meios do seu trabalho?", example: "Exemplo: Você acredita que os funcionários de uma empresa deveriam ter poder de decisão sobre a gestão, lucros e direção da mesma?", effects: { economy: 2.0 } },
            { question: "Uma nação totalmente governada por empresas e empreendedores é razoável?", effects: { economy: -2.5, society: -1.0 } },
            { question: "Tu confias mais na governança da sociedade por meio de um sistema oligárquico (governo de poucos)?", example: "Exemplo: Você acredita que um pequeno grupo de pessoas muito ricas ou influentes é o mais preparado para tomar as decisões pela sociedade?", effects: { society: 2.0 } },
            { question: "Uma nação totalmente governada pelo estado é razoável?", effects: { economy: 2.5, society: 2.0 } },
            { question: "Tu preferes que o governo adicione e faça mais regras em geral?", effects: { society: 1.5 } },
            { question: "Tu preferes que o governo adicione mais regras na parte econômica?", example: "Exemplo: Você apoia mais regulamentações sobre bancos, empresas e o mercado financeiro?", effects: { economy: 1.5 } },
            { question: "Tu preferes que o governo adicione mais regras na parte social (famílias, coletividades, indivíduos)?", example: "Exemplo: Você apoia leis que regulem costumes, comportamentos pessoais ou a estrutura familiar?", effects: { society: 2.0 } },
            { question: "Tu preferes que o governo adicione mais regras na própria governança (limitar poder político)?", example: "Exemplo: Você apoia mecanismos como mandatos limitados, divisão de poderes e maior fiscalização sobre os políticos?", effects: { society: -2.0 } },
            { question: "Tu preferes que o governo adicione mais regras na própria governança econômica (limitar gasto público)?", example: "Exemplo: Você apoia leis de responsabilidade fiscal ou um teto de gastos para o governo?", effects: { economy: -1.5 } },
            { question: "Um rei é relevante como poder moderador aos outros poderes?", effects: { society: 1.5 } },
            { question: "Um rei é relevante como poder absoluto?", effects: { society: 2.5 } },
            { question: "Um rei é relevante como símbolo cultural da nação?", effects: { society: 1.0, foreign: -0.5 } },
            { question: "Quão relevante é uma constituição para um país?", effects: { society: -2.0 } },
            { question: "Tu preferes que o governo considere mais relevante a ideia de cultura e soberania da nação?", effects: { foreign: -2.0 } },
            { question: "Tu preferes que o governo considere mais relevante os indivíduos da nação?", effects: { society: -2.0 } },
            { question: "Tu preferes que a economia seja mais protegida no sentido de exportação e importação de produtos e serviços?", example: "Exemplo: Você apoia a criação de tarifas e impostos de importação para proteger a indústria nacional?", effects: { foreign: -1.5, economy: 0.5 } },
            { question: "Tu preferes que a economia seja mais protegida no sentido interno (empreendimentos, cooperativas internas, etc.)?", effects: { economy: -1.0 } },
            { question: "Tu preferes que a economia receba mais suporte financeiro do governo central no sentido interno?", effects: { economy: 1.5 } },
            { question: "Um governo central deveria dar suporte a pesquisa e desenvolvimento de produtos, serviços, etc.?", effects: { economy: 1.0 } },
            { question: "Quão relevante é o poder coercitivo (exército, polícia)?", effects: { rules: 1.5, society: 1.0 } },
            { question: "O poder coercitivo do estado é um problema?", effects: { society: -1.5, rules: -1.0 } },
            { question: "O poder coercitivo dos indivíduos é um problema?", effects: { rules: 1.0, society: -1.0 } },
            { question: "O poder coercitivo das coletividades da sociedade são um problema?", effects: { rules: 1.0, society: 1.0 } },
            { question: "Quão relevante é a ideia de igualdade de direitos e deveres?", example: "Exemplo: Você acredita que todos devem ser tratados exatamente da mesma forma perante a lei, independentemente de sua condição?", effects: { society: -2.0 } },
            { question: "Quão relevante é a ideia de igualdade econômica (ajuda para que todas as pessoas tenham o mesmo nível social)?", example: "Exemplo: Você acredita que o Estado deve atuar para reduzir drasticamente a diferença de renda entre os mais ricos e os mais pobres?", effects: { economy: 2.5 } },
            { question: "Quão relevante é a ideia de equidade econômica (ajuda para que pessoas desfavorecidas possam receber suporte para que tenham o mesmo nível de oportunidades)?", example: "Exemplo: Você apoia políticas ou programas sociais focados em pessoas de baixa renda?", effects: { economy: 2.0 } },
            { question: "Um governo central deveria dar suporte a educação?", effects: { economy: 1.5 } },
            { question: "Um governo central deveria fazer tudo e não deveria delegar suas funções a meios privados?", effects: { economy: 2.0 } },
            { question: "A ideia de saúde pública paga com impostos é boa?", effects: { economy: 2.0 } },
            { question: "A ideia de infraestrutura (pontes, estradas) paga com impostos é boa?", effects: { economy: 1.0 } },
            { question: "A ideia de saneamento básico pago com impostos é boa?", effects: { economy: 1.0 } },
            { question: "A ideia de infraestrutura para energia elétrica pago com impostos é boa?", effects: { economy: 1.0 } },
            { question: "A ideia de fornecimento de água pago com impostos é boa?", effects: { economy: 1.0 } },
            { question: "Um governança global é razoável?", example: "Exemplo: Você apoia a criação de um governo mundial com autoridade para criar leis e impostos que se apliquem a todos os países?", effects: { foreign: 2.5 } },
            { question: "Um governança continental é razoável?", example: "Exemplo: Você apoia a ideia de blocos como a União Europeia, com parlamento e moeda únicos, para outras partes do mundo?", effects: { foreign: 1.5 } },
            { question: "Um governança comunitária é razoável?", effects: { society: -1.0 } },
            { question: "Um governança estadual é razoável?", effects: { foreign: -1.0 } },
            { question: "Um governança nacional é razoável?", effects: { foreign: -1.5 } },
            { question: "Manter tradições sobre sexualidade é relevante?", effects: { society: 2.0 } },
            { question: "Manter tradições sobre roupa e nudez é relevante?", effects: { society: 1.5 } },
            { question: "Manter tradições sobre arquitetura é relevante?", effects: { society: 1.0 } },
            { question: "Manter tradições sobre arte é relevante?", effects: { society: 1.0 } },
            { question: "Proteger artes históricas é relevante?", effects: { society: 0.5, foreign: -0.5 } },
            { question: "Proteger lugares e arquiteturas históricas é relevante?", effects: { society: 0.5, foreign: -0.5 } },
            { question: "Desejas mais ter o direito a escolher a arquitetura de tua casa em detrimento de uma organização arquitetônica da região?", effects: { society: -1.5 } },
            { question: "Desejas mais ter o direito a manter a organização arquitetônica da região em detrimento de teres o direito a escolher a arquitetura de tua casa?", effects: { society: 1.5 } },
            { question: "Imposto de renda é razoável?", effects: { economy: 1.0 } },
            { question: "Imposto de renda progressivo é razoável?", example: "Exemplo: Você acredita que quem ganha mais deve pagar uma porcentagem maior de sua renda em impostos?", effects: { economy: 2.0 } },
            { question: "Imposto em produtos e serviços é razoável?", effects: { economy: 1.0 } },
            { question: "Imposto em grandes fortunas é razoável?", effects: { economy: 2.5 } },
            { question: "Imposto em herança é razoável?", effects: { economy: 2.0 } },
            { question: "Mais imposto é melhor?", effects: { economy: 1.5 } },
            { question: "Devemos punir criminosos?", effects: { rules: 2.0 } },
            { question: "Devemos resocializar criminosos?", effects: { rules: -2.0 } },
            { question: "Crimes hediondos devem receber pena maior?", effects: { rules: 1.5 } },
            { question: "Criminosos que cometeram crimes hediondos devem ser resocializados?", effects: { rules: -1.5 } },
            { question: "Criminosos que cometeram vários crimes devem receber pena cada vez maior por cada novo crime cometido?", effects: { rules: 1.5 } },
            { question: "Criminosos que cometeram vários crimes devem ser resocializados?", effects: { rules: -1.5 } },
            { question: "Criminosos que cometeram crimes devem pagar por suas penalidades com trabalhos específicos?", effects: { rules: 1.0 } },
            { question: "Devemos ter penas alternativas (como serviços comunitários) para crimes não violentos?", effects: { rules: -1.5 } },
            { question: "Preferes que o país seja mais integrado economicamente a blocos internacionais e menos independente?", effects: { foreign: 1.5, economy: -0.5 } },
            { question: "Um país com um território maior e mais população tende a ser melhor governado?", effects: { foreign: -1.0 } },
            { question: "Um país com um território menor e menos população tende a ser melhor governado?", effects: { foreign: 1.0 } },
            { question: "A sociedade se beneficia mais de grandes centros urbanos densamente povoados?", effects: { society: 0.5, foreign: 0.5 } },
            { question: "A sociedade se beneficia mais de pequenas comunidades rurais e espalhadas?", effects: { society: -0.5, foreign: -0.5 } }
        ];


        document.addEventListener('DOMContentLoaded', () => {
            // Estado do questionário
            let currentQuestionIndex = 0;
            let userAnswers = new Array(questions.length).fill(0);
            let scores = { economy: 0, society: 0, foreign: 0, rules: 0 };
            const maxScorePerAxis = { economy: 0, society: 0, foreign: 0, rules: 0 };
            let startTime;
            let endTime;

            // Elementos do DOM
            const startBtn = document.getElementById('start-quiz-btn');
            const introSection = document.getElementById('intro-section');
            const questionContainer = document.getElementById('question-container');
            const questionCounter = document.getElementById('question-counter');
            const questionSelect = document.getElementById('question-select');
            const questionText = document.getElementById('question-text');
            const questionExample = document.getElementById('question-example');
            const slider = document.getElementById('answer-slider');
            const sliderValue = document.getElementById('slider-value');
            const prevBtn = document.getElementById('prev-question-btn');
            const homeBtn = document.getElementById('home-btn');
            const nextBtn = document.getElementById('next-question-btn');
            const resultsSection = document.getElementById('results-section');
            const generateReportBtn = document.getElementById('generate-report-btn');
            const restartQuizBtn = document.getElementById('restart-quiz-btn');
            const reportContainer = document.getElementById('report-container');
            const reportOutput = document.getElementById('report-output');
            const copyReportBtn = document.getElementById('copy-report-btn');
            const downloadReportBtn = document.getElementById('download-report-btn');
            const copyFeedback = document.getElementById('copy-feedback');

            // Elementos do Modal
            const modal = document.getElementById('info-modal');
            const modalTitle = document.getElementById('info-title');
            const modalText = document.getElementById('info-text');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const infoCooperativaBtn = document.getElementById('info-cooperativa-btn');
            const infoEstadoBtn = document.getElementById('info-estado-btn');
            const infoEmpresaBtn = document.getElementById('info-empresa-btn');
            
            // --- Funções do Modal ---
            function showInfo(type) {
                if (definitions[type]) {
                    modalTitle.textContent = definitions[type].title;
                    modalText.textContent = definitions[type].text;
                    modal.style.display = 'flex';
                }
            }

            function closeInfo() {
                modal.style.display = 'none';
            }

            // --- Funções do Questionário ---
            function calculateMaxScores() {
                // Reseta os scores máximos
                Object.keys(maxScorePerAxis).forEach(axis => maxScorePerAxis[axis] = 0);
                
                // Itera sobre cada questão e seus efeitos
                questions.forEach(q => {
                    for (const axis in q.effects) {
                        if (maxScorePerAxis.hasOwnProperty(axis)) {
                            // Soma o valor absoluto do peso multiplicado pelo valor máximo do slider (10)
                            maxScorePerAxis[axis] += Math.abs(q.effects[axis]) * 10;
                        }
                    }
                });
            }
            
            function startQuiz() {
                startTime = new Date();
                introSection.classList.add('hidden');
                questionContainer.classList.remove('hidden');
                resultsSection.classList.add('hidden');
                reportContainer.classList.add('hidden');
                currentQuestionIndex = 0;
                userAnswers.fill(0);
                displayQuestion();
                calculateScoresAndupdatePoints();
            }

            function displayQuestion() {
                const currentQ = questions[currentQuestionIndex];
                questionText.textContent = currentQ.question;

                if (currentQ.example) {
                    questionExample.textContent = currentQ.example;
                    questionExample.classList.remove('hidden');
                } else {
                    questionExample.textContent = '';
                    questionExample.classList.add('hidden');
                }

                slider.value = userAnswers[currentQuestionIndex];
                sliderValue.textContent = slider.value;
                questionCounter.textContent = `Pergunta ${currentQuestionIndex + 1} de ${questions.length}`;
                questionSelect.value = currentQuestionIndex;
                prevBtn.disabled = currentQuestionIndex === 0;
                nextBtn.textContent = currentQuestionIndex === questions.length - 1 ? 'Finalizar' : 'Próxima';
            }

            function saveAnswer() {
                userAnswers[currentQuestionIndex] = parseInt(slider.value);
            }

            function nextQuestion() {
                saveAnswer(); 
                calculateScoresAndupdatePoints(); 
                if (currentQuestionIndex < questions.length - 1) {
                    currentQuestionIndex++;
                    displayQuestion();
                } else {
                    endTime = new Date();
                    questionContainer.classList.add('hidden');
                    resultsSection.classList.remove('hidden');
                }
            }

            function prevQuestion() {
                saveAnswer(); 
                calculateScoresAndupdatePoints(); 
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    displayQuestion();
                }
            }

            function calculateScoresAndupdatePoints() {
                // Reseta os scores
                scores = { economy: 0, society: 0, foreign: 0, rules: 0 };
                
                // Itera sobre cada resposta do usuário
                userAnswers.forEach((answer, index) => {
                    const question = questions[index];
                    // Itera sobre os efeitos de cada questão
                    for (const axis in question.effects) {
                        if (scores.hasOwnProperty(axis)) {
                            const weight = question.effects[axis];
                            scores[axis] += answer * weight;
                        }
                    }
                });
                updateAllPoints();
            }

            function updateAllPoints() {
                updatePoint('economy');
                updatePoint('society');
                updatePoint('foreign');
                updatePoint('rules');
            }

            function updatePoint(axis) {
                const point = document.getElementById(`${axis}-point`);
                const pointValue = document.getElementById(`${axis}-point-value`);
                if (!point || !pointValue) return;
                const maxScore = maxScorePerAxis[axis];
                // Normaliza a pontuação de -1 a 1
                const normalizedScore = maxScore > 0 ? scores[axis] / maxScore : 0;
                // Converte a pontuação normalizada para uma porcentagem de 0 a 100
                let percentage = (normalizedScore + 1) / 2 * 100;
                percentage = Math.max(0, Math.min(100, percentage));
                
                const roundedPercentage = Math.round(percentage);
                point.style.top = `${percentage}%`;
                pointValue.textContent = `${roundedPercentage}%`;
            }
            
            function restartQuiz() {
                startTime = null;
                endTime = null;
                resultsSection.classList.add('hidden');
                questionContainer.classList.add('hidden');
                introSection.classList.remove('hidden');
                userAnswers.fill(0);
                calculateScoresAndupdatePoints();
            }
            
            function generateReport() {
                const continentSelect = document.getElementById('continent-select');
                const selectedOption = continentSelect.options[continentSelect.selectedIndex];
                const region = selectedOption.textContent;
                
                let body = `Olá,\n\nEstou enviando meus resultados do Questionário de Ideologia Política para contribuir com a melhoria do teste.\n\n`;
                body += `Região: ${region}\n`;

                if (startTime && endTime) {
                    const timeTakenSeconds = Math.round((endTime - startTime) / 1000);
                    const minutes = Math.floor(timeTakenSeconds / 60);
                    const seconds = timeTakenSeconds % 60;
                    body += `Tempo para Concluir: ${minutes} minutos e ${seconds} segundos\n`;
                }
                
                body += "\n--- RESUMO DOS RESULTADOS ---\n";
                Object.keys(scores).forEach(axis => {
                    const maxScore = maxScorePerAxis[axis];
                    const percentage = maxScore > 0 ? (((scores[axis] / maxScore) + 1) / 2 * 100).toFixed(1) : 50;
                    let axisName = axis.charAt(0).toUpperCase() + axis.slice(1);
                    if(axis === 'economy') axisName = 'Economia (Socialismo)';
                    if(axis === 'society') axisName = 'Sociedade (Conservadorismo)';
                    if(axis === 'foreign') axisName = 'Externo (Globalização)';
                    if(axis === 'rules') axisName = 'Regras Sociais (Punição)';
                    body += `- ${axisName}: ${percentage}%\n`;
                });

                body += "\n--- RESPOSTAS DETALHADAS ---\n";
                questions.forEach((q, index) => {
                    body += `\nPergunta ${index + 1}: ${q.question}\n`;
                    body += `Resposta: ${userAnswers[index]}\n`;
                });

                body += "\n\nEste é um relatório gerado automaticamente.";
                
                reportOutput.value = body;
                reportContainer.classList.remove('hidden');
            }

            function copyReport() {
                reportOutput.select();
                reportOutput.setSelectionRange(0, 99999); // Para dispositivos móveis
                try {
                    document.execCommand('copy');
                    copyFeedback.textContent = 'Relatório copiado para a área de transferência!';
                    setTimeout(() => { copyFeedback.textContent = ''; }, 3000);
                } catch (err) {
                    copyFeedback.textContent = 'Erro ao copiar. Por favor, copie manualmente.';
                }
            }

            function downloadReport() {
                const text = reportOutput.value;
                const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
                const anchor = document.createElement('a');
                
                anchor.download = 'relatorio_poliquest.txt';
                anchor.href = window.URL.createObjectURL(blob);
                anchor.style.display = 'none';
                document.body.appendChild(anchor);
                
                anchor.click();
                
                document.body.removeChild(anchor);
                window.URL.revokeObjectURL(anchor.href);
            }

            function populateQuestionSelect() {
                questionSelect.innerHTML = '';
                questions.forEach((q, index) => {
                    const option = document.createElement('option');
                    option.value = index;
                    const questionPreview = q.question.length > 30 ? q.question.substring(0, 30) + '...' : q.question;
                    option.textContent = `P. ${index + 1}: ${questionPreview}`;
                    questionSelect.appendChild(option);
                });
            }

            // --- Funções de Acessibilidade ---
            function setupTheme() {
                const themeToggle = document.getElementById('theme-toggle');
                const lightIcon = document.getElementById('theme-icon-light');
                const darkIcon = document.getElementById('theme-icon-dark');
                const root = document.documentElement;
                
                const applyTheme = (theme) => {
                    if (theme === 'dark') {
                        root.classList.add('dark');
                        lightIcon.classList.add('hidden');
                        darkIcon.classList.remove('hidden');
                    } else {
                        root.classList.remove('dark');
                        lightIcon.classList.remove('hidden');
                        darkIcon.classList.add('hidden');
                    }
                };
                
                const currentTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
                applyTheme(currentTheme);

                themeToggle.addEventListener('click', () => {
                    const isDark = root.classList.toggle('dark');
                    localStorage.setItem('theme', isDark ? 'dark' : 'light');
                    applyTheme(isDark ? 'dark' : 'light');
                });
            }
            
            function setupFontSize() {
                const increaseBtn = document.getElementById('increase-font');
                const decreaseBtn = document.getElementById('decrease-font');
                const root = document.documentElement;

                const updateFontSize = (newSize) => {
                    const size = Math.max(12, Math.min(24, newSize));
                    root.style.fontSize = `${size}px`;
                    localStorage.setItem('fontSize', size);
                };

                const currentSize = localStorage.getItem('fontSize');
                if (currentSize) {
                    updateFontSize(parseFloat(currentSize));
                }

                increaseBtn.addEventListener('click', () => {
                    let current = parseFloat(getComputedStyle(root).fontSize);
                    updateFontSize(current + 1);
                });

                decreaseBtn.addEventListener('click', () => {
                    let current = parseFloat(getComputedStyle(root).fontSize);
                    updateFontSize(current - 1);
                });
            }

            // --- INICIALIZAÇÃO E EVENT LISTENERS ---
            
            closeInfo();
            
            // Listeners do Questionário
            startBtn.addEventListener('click', startQuiz);
            prevBtn.addEventListener('click', prevQuestion);
            homeBtn.addEventListener('click', restartQuiz);
            nextBtn.addEventListener('click', nextQuestion);
            slider.addEventListener('input', () => {
                sliderValue.textContent = slider.value;
            });
            slider.addEventListener('change', () => { // Atualiza o score apenas quando o usuário solta o slider
                saveAnswer();
                calculateScoresAndupdatePoints();
            });
            restartQuizBtn.addEventListener('click', restartQuiz);
            generateReportBtn.addEventListener('click', generateReport);
            copyReportBtn.addEventListener('click', copyReport);
            downloadReportBtn.addEventListener('click', downloadReport);

            questionSelect.addEventListener('change', (e) => {
                const newIndex = parseInt(e.target.value, 10);
                if (!isNaN(newIndex) && newIndex >= 0 && newIndex < questions.length) {
                    saveAnswer(); // Salva a resposta da questão atual antes de pular
                    calculateScoresAndupdatePoints();
                    currentQuestionIndex = newIndex;
                    displayQuestion();
                }
            });

            // Listeners do Modal
            closeModalBtn.addEventListener('click', closeInfo);
            modal.addEventListener('click', (event) => {
                if (event.target === modal) {
                    closeInfo();
                }
            });
            infoCooperativaBtn.addEventListener('click', () => showInfo('cooperativa'));
            infoEstadoBtn.addEventListener('click', () => showInfo('estado'));
            infoEmpresaBtn.addEventListener('click', () => showInfo('empresa'));

            setupTheme();
            setupFontSize();
            calculateMaxScores();
            populateQuestionSelect();
        });
    </script>
</body>
</html>